package SpelClass;

import java.util.Scanner;

public class SpelClass {


    static int dator, spelare,gamemode,datorvinster=0,spelarevinster=0, oavgjort=0;
    static String[] val = {"Sten", "Sax", "Påse"};
    static String modstring;
    static boolean exit = false, modifier;
    
    static void sleeptime(int sleepseconds){ // Kan användas för att lägga in en delay.
        try {
            Thread.sleep(sleepseconds);
        } catch(InterruptedException ex) {
            Thread.currentThread().interrupt();
        }
    }
    
        static void game(){
        dator = 0 + (int)(Math.random() * 3); // Slumpar fram 0, 1 eller 2 för datorn som ska bli datorns val av sten sax eller påse.
        input(2); // Skickar en input med en modifierare = 2.
        System.out.println(" Du valde : "+ val[spelare]);
        System.out.println(" Datorn valde : "+ val[dator]);
        if (modifier == false){ // modstring är här för att urskilja om det är en rond man vinner eller om man vinner hela matchen.
            modstring = "RONDEN";
        }else{
            modstring = "MATCHEN";
        }
        //Logiken för sten sax påse matematiskt.
        if(spelare == 2 && dator == 0){
            System.out.println("  DU VANN " + modstring);
            spelarevinster++;
        }else if (spelare == 0 && dator == 2){
            System.out.println("  DU FÖRLORADE " + modstring);
            datorvinster++;
        }
        else if (spelare == dator)
        {
            System.out.println("   " + modstring + " BLEV OAVGJORD");
            oavgjort++;
        }else if(spelare == dator-1)
        {
            System.out.println("  DU VANN " + modstring);
            spelarevinster++;
        }else
        {
            System.out.println("  DU FÖRLORADE " + modstring);
            datorvinster++;
        }
    }
    
    static void input(int mod){
        if (mod==1){
            System.out.print("Välj spelläge:   [0] = En ronda    [1] = Bäst av tre    [5] = Stäng av spelet : ");
        }else if (mod==2){
            System.out.print("Välj: [1] = Sten, [2] = Sax, [3] = Påse : ");
        }
        
        Scanner scan = new Scanner(System.in);   
        while(!scan.hasNextInt()) {
        System.out.print("Ange ett nummer enligt hänvisningarna: ");
        scan.next();
        }
        
        if (mod==1){
            gamemode = scan.nextInt();
        }else if (mod==2){
            spelare = scan.nextInt();
            spelare--;
        }
    }
    public static void main(String[] args) {
        while (exit != true){ // Kör en whileloop tills att spelaren bryder sig ur den.
            input(1);
            switch (gamemode) {
                case 0:
                    once();
                    break;
                case 1:
                    bestofthree();
                    break;
                case 5:
                    exit = true;
                default:
                    break;
            }
        }
        System.out.println("Stänger av spelet...");
        System.exit(0);
    }
    
    static void bestofthree(){
        modifier = false;
        spelarevinster =0; datorvinster=0; oavgjort=0;
        for (int i=0;i<3;i++){ // Kör en forloop 3 gånger, eventuellt 2 gånger.
            if (i==2){ // Kör 2 gånger om den ena har vunnit två gånger i rad.
                if (spelarevinster==2){
                    break;
                }else if (datorvinster==2){
                    break;
                }
            }
        game();
        }
                if (spelarevinster > datorvinster){ // Skriver ut resultatet
                    System.out.println("   DU VANN MATCHEN BÄST AV TRE");
                }else if (spelarevinster < datorvinster){
                    System.out.println("   DU FÖRLORADE MATCHEN BÄST AV TRE");
                }else{
                    System.out.println("   DET BLEV OAVGJORT I MATCHEN BÄST AV TRE");
                }
        }
    
    static void once(){
        modifier = true;
        game();
    }
}
